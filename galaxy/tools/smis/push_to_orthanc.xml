<tool id="smis_push_to_orthanc" name="Push DICOM to Orthanc" version="0.1" profile="21.01">
  <description>Upload DICOM instances back to Orthanc (REST) and report counts</description>

  <requirements>
    <requirement type="package" version="2.31">requests</requirement>
  </requirements>

  <command detect_errors="exit_code"><![CDATA[
python $__tool_directory__/scripts/push_to_orthanc.py \
  --orthanc-url '${orthanc_url}' \
  --in '${in_tar}' \
  --report '${report}'
  ]]></command>

  <inputs>
    <param name="orthanc_url" type="text" value="http://orthanc:8042" label="Orthanc URL"/>
    <param name="in_tar" type="data" format="tar" label="DICOM tar to upload"/>
  </inputs>

  <outputs>
    <data name="report" format="txt" label="Orthanc_Upload_Report.txt"/>
  </outputs>

  <help><![CDATA[
Uploads all DICOM files contained in the input tar to Orthanc using the REST endpoint /instances.
  ]]></help>
</tool>
